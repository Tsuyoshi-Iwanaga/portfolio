<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>ミニ掲示板</title>
<link type="text/css" href="./style.css" rel="stylesheet" media="all">
<script>
  function init() {
    var id = localStorage.getItem('id');
    if (id == null) {
      location.href = './login';
    }
    document.querySelector('#id').textContent = 'ID:' + id;
    document.querySelector('#id_input').value = id;
  }
</script>
</head>
<body onload="init();">
  <header>
    <h1>掲示板</h1>
  </header>
  <div role="main">
    <p>※メッセージは最大10個まで保管されます。</p>
    <form action="/" method="post">
      <p><span id="id"></span><input type="hidden" id="id_input" name="id" value=""></p>
      <p><input type="text" name="msg"><input type="submit" value="送信"></p>
    </form>
    <hr>
    <table style="width: 85%;">
      <% for(var i in data) { %>
        <%- include('data_item', {val: data[i]}) %>
      <% } %>
    </table>
  </div>
</body>
</html>
